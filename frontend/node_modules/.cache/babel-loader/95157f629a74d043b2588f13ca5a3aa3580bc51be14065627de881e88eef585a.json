{"ast":null,"code":"var _jsxFileName = \"E:\\\\AI\\\\SIH 2025\\\\frontend\\\\src\\\\components\\\\Reports.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useLanguage } from '../context/LanguageContext';\nimport axios from 'axios';\nimport { Line, Bar, Doughnut } from 'react-chartjs-2';\nimport { BarChart3, TrendingUp, Calendar, Download, PieChart, Activity, Target, AlertTriangle, CheckCircle, Filter, RefreshCw } from 'lucide-react';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, BarElement, ArcElement, Title, Tooltip, Legend, Filler } from 'chart.js';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, BarElement, ArcElement, Title, Tooltip, Legend, Filler);\nconst Reports = () => {\n  _s();\n  var _statsData$cropTypes, _statsData$riskDistri, _statsData$riskDistri2, _statsData$riskDistri3, _reportsData$trends, _reportsData$trends$y, _reportsData$predicti;\n  const {\n    user\n  } = useAuth();\n  const {\n    t\n  } = useLanguage();\n  const [reportsData, setReportsData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedCrop, setSelectedCrop] = useState('all');\n  const [selectedTimeRange, setSelectedTimeRange] = useState('all');\n  const [statsData, setStatsData] = useState(null);\n  useEffect(() => {\n    fetchReportsData();\n  }, [user]);\n  useEffect(() => {\n    if (reportsData) {\n      calculateStats();\n    }\n  }, [reportsData, selectedCrop, selectedTimeRange]);\n  const fetchReportsData = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/api/reports/${user.id}`);\n      setReportsData(response.data);\n      toast.success('Reports loaded successfully');\n    } catch (error) {\n      console.error('Error fetching reports:', error);\n      toast.error('Failed to load reports data');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const calculateStats = () => {\n    if (!(reportsData !== null && reportsData !== void 0 && reportsData.predictions)) return;\n    let filteredData = reportsData.predictions;\n\n    // Filter by crop type\n    if (selectedCrop !== 'all') {\n      filteredData = filteredData.filter(p => p.crop_type === selectedCrop);\n    }\n\n    // Filter by time range\n    if (selectedTimeRange !== 'all') {\n      const now = new Date();\n      const timeRanges = {\n        '7d': 7,\n        '30d': 30,\n        '90d': 90,\n        '1y': 365\n      };\n      const days = timeRanges[selectedTimeRange];\n      const cutoffDate = new Date(now.getTime() - days * 24 * 60 * 60 * 1000);\n      filteredData = filteredData.filter(p => new Date(p.created_at) >= cutoffDate);\n    }\n    const totalPredictions = filteredData.length;\n    const avgYield = totalPredictions > 0 ? filteredData.reduce((sum, p) => sum + p.predicted_yield, 0) / totalPredictions : 0;\n    const riskDistribution = filteredData.reduce((acc, p) => {\n      acc[p.risk_level] = (acc[p.risk_level] || 0) + 1;\n      return acc;\n    }, {});\n    const cropTypes = [...new Set(filteredData.map(p => p.crop_type))];\n    setStatsData({\n      totalPredictions,\n      avgYield: avgYield.toFixed(2),\n      riskDistribution,\n      cropTypes,\n      filteredData\n    });\n  };\n  const getFilteredData = () => {\n    if (!(reportsData !== null && reportsData !== void 0 && reportsData.predictions)) return [];\n    let data = reportsData.predictions;\n    if (selectedCrop !== 'all') {\n      data = data.filter(p => p.crop_type === selectedCrop);\n    }\n    if (selectedTimeRange !== 'all') {\n      const now = new Date();\n      const timeRanges = {\n        '7d': 7,\n        '30d': 30,\n        '90d': 90,\n        '1y': 365\n      };\n      const days = timeRanges[selectedTimeRange];\n      const cutoffDate = new Date(now.getTime() - days * 24 * 60 * 60 * 1000);\n      data = data.filter(p => new Date(p.created_at) >= cutoffDate);\n    }\n    return data.slice(0, 20); // Show last 20 entries\n  };\n\n  // Chart data preparation\n  const yieldTrendData = {\n    labels: getFilteredData().map(p => new Date(p.created_at).toLocaleDateString()).slice(-10),\n    datasets: [{\n      label: 'Predicted Yield (t/ha)',\n      data: getFilteredData().map(p => p.predicted_yield).slice(-10),\n      borderColor: 'rgb(34, 197, 94)',\n      backgroundColor: 'rgba(34, 197, 94, 0.1)',\n      tension: 0.4,\n      fill: true,\n      pointBackgroundColor: 'rgb(34, 197, 94)',\n      pointBorderColor: '#fff',\n      pointBorderWidth: 2,\n      pointRadius: 6\n    }]\n  };\n  const cropYieldData = {\n    labels: (statsData === null || statsData === void 0 ? void 0 : statsData.cropTypes) || [],\n    datasets: [{\n      label: 'Average Yield by Crop',\n      data: (statsData === null || statsData === void 0 ? void 0 : (_statsData$cropTypes = statsData.cropTypes) === null || _statsData$cropTypes === void 0 ? void 0 : _statsData$cropTypes.map(crop => {\n        const cropPredictions = getFilteredData().filter(p => p.crop_type === crop);\n        return cropPredictions.length > 0 ? cropPredictions.reduce((sum, p) => sum + p.predicted_yield, 0) / cropPredictions.length : 0;\n      })) || [],\n      backgroundColor: ['rgba(34, 197, 94, 0.8)', 'rgba(59, 130, 246, 0.8)', 'rgba(245, 158, 11, 0.8)', 'rgba(239, 68, 68, 0.8)', 'rgba(147, 51, 234, 0.8)', 'rgba(236, 72, 153, 0.8)'],\n      borderColor: ['rgba(34, 197, 94, 1)', 'rgba(59, 130, 246, 1)', 'rgba(245, 158, 11, 1)', 'rgba(239, 68, 68, 1)', 'rgba(147, 51, 234, 1)', 'rgba(236, 72, 153, 1)'],\n      borderWidth: 2\n    }]\n  };\n  const riskDistributionData = {\n    labels: ['Low Risk (Green)', 'Medium Risk (Yellow)', 'High Risk (Red)'],\n    datasets: [{\n      data: [(statsData === null || statsData === void 0 ? void 0 : (_statsData$riskDistri = statsData.riskDistribution) === null || _statsData$riskDistri === void 0 ? void 0 : _statsData$riskDistri.Green) || 0, (statsData === null || statsData === void 0 ? void 0 : (_statsData$riskDistri2 = statsData.riskDistribution) === null || _statsData$riskDistri2 === void 0 ? void 0 : _statsData$riskDistri2.Yellow) || 0, (statsData === null || statsData === void 0 ? void 0 : (_statsData$riskDistri3 = statsData.riskDistribution) === null || _statsData$riskDistri3 === void 0 ? void 0 : _statsData$riskDistri3.Red) || 0],\n      backgroundColor: ['rgba(34, 197, 94, 0.8)', 'rgba(245, 158, 11, 0.8)', 'rgba(239, 68, 68, 0.8)'],\n      borderColor: ['rgba(34, 197, 94, 1)', 'rgba(245, 158, 11, 1)', 'rgba(239, 68, 68, 1)'],\n      borderWidth: 2\n    }]\n  };\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: {\n          font: {\n            size: 12\n          }\n        }\n      },\n      title: {\n        display: false\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        grid: {\n          color: 'rgba(0,0,0,0.1)'\n        },\n        ticks: {\n          font: {\n            size: 11\n          }\n        }\n      },\n      x: {\n        grid: {\n          color: 'rgba(0,0,0,0.1)'\n        },\n        ticks: {\n          font: {\n            size: 11\n          }\n        }\n      }\n    }\n  };\n  const doughnutOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom',\n        labels: {\n          font: {\n            size: 12\n          },\n          padding: 20\n        }\n      }\n    }\n  };\n  const exportData = () => {\n    try {\n      const dataToExport = {\n        user: user.username,\n        exportDate: new Date().toISOString(),\n        filters: {\n          crop: selectedCrop,\n          timeRange: selectedTimeRange\n        },\n        statistics: statsData,\n        predictions: getFilteredData()\n      };\n      const blob = new Blob([JSON.stringify(dataToExport, null, 2)], {\n        type: 'application/json'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `crop-reports-${user.username}-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      toast.success('Report exported successfully');\n    } catch (error) {\n      toast.error('Failed to export report');\n    }\n  };\n  const getRiskIcon = riskLevel => {\n    switch (riskLevel) {\n      case 'Green':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"h-4 w-4 text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 16\n        }, this);\n      case 'Yellow':\n        return /*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"h-4 w-4 text-yellow-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 16\n        }, this);\n      case 'Red':\n        return /*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"h-4 w-4 text-red-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Activity, {\n          className: \"h-4 w-4 text-gray-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center pt-16\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 pt-16\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-900 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n            className: \"h-8 w-8 mr-3 text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), t('reports')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mt-2\",\n          children: \"Analyze your crop yield trends and historical predictions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), (reportsData === null || reportsData === void 0 ? void 0 : (_reportsData$trends = reportsData.trends) === null || _reportsData$trends === void 0 ? void 0 : (_reportsData$trends$y = _reportsData$trends.yield_trend) === null || _reportsData$trends$y === void 0 ? void 0 : _reportsData$trends$y.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-md p-6 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-800 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(TrendingUp, {\n              className: \"h-6 w-6 mr-2 text-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this), \"Yield Trends\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"flex items-center space-x-1 text-blue-600 hover:text-blue-700\",\n            children: [/*#__PURE__*/_jsxDEV(Download, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Export\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-64\",\n          children: /*#__PURE__*/_jsxDEV(Line, {\n            data: chartData,\n            options: chartOptions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-md p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-800 mb-6 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Calendar, {\n            className: \"h-6 w-6 mr-2 text-green-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), \"Historical Predictions\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), (reportsData === null || reportsData === void 0 ? void 0 : (_reportsData$predicti = reportsData.predictions) === null || _reportsData$predicti === void 0 ? void 0 : _reportsData$predicti.length) > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Crop Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Predicted Yield\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Risk Level\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Recommendations\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: reportsData.predictions.map(prediction => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-gray-50\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: new Date(prediction.created_at).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: prediction.crop_type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600\",\n                  children: [prediction.predicted_yield, \" t/ha\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `inline-flex px-2 py-1 text-xs font-semibold rounded-full ${prediction.risk_level === 'Green' ? 'bg-green-100 text-green-800' : prediction.risk_level === 'Yellow' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'}`,\n                    children: t(prediction.risk_level === 'Green' ? 'safe' : prediction.risk_level === 'Yellow' ? 'warning' : 'risk')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 407,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 text-sm text-gray-900\",\n                  children: [prediction.recommendations.length, \" recommendations\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 23\n                }, this)]\n              }, prediction.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No historical data available yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.location.href = '/data-entry',\n            className: \"mt-4 bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 transition-colors\",\n            children: \"Start Making Predictions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 334,\n    columnNumber: 5\n  }, this);\n};\n_s(Reports, \"DqsvOtD2f61g9RATZZIIecL8UMg=\", false, function () {\n  return [useAuth, useLanguage];\n});\n_c = Reports;\nexport default Reports;\nvar _c;\n$RefreshReg$(_c, \"Reports\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","useLanguage","axios","Line","Bar","Doughnut","BarChart3","TrendingUp","Calendar","Download","PieChart","Activity","Target","AlertTriangle","CheckCircle","Filter","RefreshCw","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","BarElement","ArcElement","Title","Tooltip","Legend","Filler","toast","jsxDEV","_jsxDEV","register","Reports","_s","_statsData$cropTypes","_statsData$riskDistri","_statsData$riskDistri2","_statsData$riskDistri3","_reportsData$trends","_reportsData$trends$y","_reportsData$predicti","user","t","reportsData","setReportsData","loading","setLoading","selectedCrop","setSelectedCrop","selectedTimeRange","setSelectedTimeRange","statsData","setStatsData","fetchReportsData","calculateStats","response","get","id","data","success","error","console","predictions","filteredData","filter","p","crop_type","now","Date","timeRanges","days","cutoffDate","getTime","created_at","totalPredictions","length","avgYield","reduce","sum","predicted_yield","riskDistribution","acc","risk_level","cropTypes","Set","map","toFixed","getFilteredData","slice","yieldTrendData","labels","toLocaleDateString","datasets","label","borderColor","backgroundColor","tension","fill","pointBackgroundColor","pointBorderColor","pointBorderWidth","pointRadius","cropYieldData","crop","cropPredictions","borderWidth","riskDistributionData","Green","Yellow","Red","chartOptions","responsive","maintainAspectRatio","plugins","legend","position","font","size","title","display","scales","y","beginAtZero","grid","color","ticks","x","doughnutOptions","padding","exportData","dataToExport","username","exportDate","toISOString","filters","timeRange","statistics","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","a","document","createElement","href","download","split","body","appendChild","click","removeChild","revokeObjectURL","getRiskIcon","riskLevel","className","fileName","_jsxFileName","lineNumber","columnNumber","children","trends","yield_trend","chartData","options","prediction","recommendations","onClick","window","location","_c","$RefreshReg$"],"sources":["E:/AI/SIH 2025/frontend/src/components/Reports.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useLanguage } from '../context/LanguageContext';\nimport axios from 'axios';\nimport { Line, Bar, Doughnut } from 'react-chartjs-2';\nimport { \n  BarChart3, \n  TrendingUp, \n  Calendar, \n  Download, \n  PieChart, \n  Activity,\n  Target,\n  AlertTriangle,\n  CheckCircle,\n  Filter,\n  RefreshCw\n} from 'lucide-react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  ArcElement,\n  Title,\n  Tooltip,\n  Legend,\n  Filler\n} from 'chart.js';\nimport toast from 'react-hot-toast';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  ArcElement,\n  Title,\n  Tooltip,\n  Legend,\n  Filler\n);\n\nconst Reports = () => {\n  const { user } = useAuth();\n  const { t } = useLanguage();\n  const [reportsData, setReportsData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedCrop, setSelectedCrop] = useState('all');\n  const [selectedTimeRange, setSelectedTimeRange] = useState('all');\n  const [statsData, setStatsData] = useState(null);\n\n  useEffect(() => {\n    fetchReportsData();\n  }, [user]);\n\n  useEffect(() => {\n    if (reportsData) {\n      calculateStats();\n    }\n  }, [reportsData, selectedCrop, selectedTimeRange]);\n\n  const fetchReportsData = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/api/reports/${user.id}`);\n      setReportsData(response.data);\n      toast.success('Reports loaded successfully');\n    } catch (error) {\n      console.error('Error fetching reports:', error);\n      toast.error('Failed to load reports data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const calculateStats = () => {\n    if (!reportsData?.predictions) return;\n    \n    let filteredData = reportsData.predictions;\n    \n    // Filter by crop type\n    if (selectedCrop !== 'all') {\n      filteredData = filteredData.filter(p => p.crop_type === selectedCrop);\n    }\n    \n    // Filter by time range\n    if (selectedTimeRange !== 'all') {\n      const now = new Date();\n      const timeRanges = {\n        '7d': 7,\n        '30d': 30,\n        '90d': 90,\n        '1y': 365\n      };\n      const days = timeRanges[selectedTimeRange];\n      const cutoffDate = new Date(now.getTime() - days * 24 * 60 * 60 * 1000);\n      filteredData = filteredData.filter(p => new Date(p.created_at) >= cutoffDate);\n    }\n    \n    const totalPredictions = filteredData.length;\n    const avgYield = totalPredictions > 0 ? \n      filteredData.reduce((sum, p) => sum + p.predicted_yield, 0) / totalPredictions : 0;\n    \n    const riskDistribution = filteredData.reduce((acc, p) => {\n      acc[p.risk_level] = (acc[p.risk_level] || 0) + 1;\n      return acc;\n    }, {});\n    \n    const cropTypes = [...new Set(filteredData.map(p => p.crop_type))];\n    \n    setStatsData({\n      totalPredictions,\n      avgYield: avgYield.toFixed(2),\n      riskDistribution,\n      cropTypes,\n      filteredData\n    });\n  };\n\n  const getFilteredData = () => {\n    if (!reportsData?.predictions) return [];\n    \n    let data = reportsData.predictions;\n    \n    if (selectedCrop !== 'all') {\n      data = data.filter(p => p.crop_type === selectedCrop);\n    }\n    \n    if (selectedTimeRange !== 'all') {\n      const now = new Date();\n      const timeRanges = {\n        '7d': 7,\n        '30d': 30,\n        '90d': 90,\n        '1y': 365\n      };\n      const days = timeRanges[selectedTimeRange];\n      const cutoffDate = new Date(now.getTime() - days * 24 * 60 * 60 * 1000);\n      data = data.filter(p => new Date(p.created_at) >= cutoffDate);\n    }\n    \n    return data.slice(0, 20); // Show last 20 entries\n  };\n\n  // Chart data preparation\n  const yieldTrendData = {\n    labels: getFilteredData().map(p => new Date(p.created_at).toLocaleDateString()).slice(-10),\n    datasets: [\n      {\n        label: 'Predicted Yield (t/ha)',\n        data: getFilteredData().map(p => p.predicted_yield).slice(-10),\n        borderColor: 'rgb(34, 197, 94)',\n        backgroundColor: 'rgba(34, 197, 94, 0.1)',\n        tension: 0.4,\n        fill: true,\n        pointBackgroundColor: 'rgb(34, 197, 94)',\n        pointBorderColor: '#fff',\n        pointBorderWidth: 2,\n        pointRadius: 6,\n      },\n    ],\n  };\n\n  const cropYieldData = {\n    labels: statsData?.cropTypes || [],\n    datasets: [\n      {\n        label: 'Average Yield by Crop',\n        data: statsData?.cropTypes?.map(crop => {\n          const cropPredictions = getFilteredData().filter(p => p.crop_type === crop);\n          return cropPredictions.length > 0 ? \n            cropPredictions.reduce((sum, p) => sum + p.predicted_yield, 0) / cropPredictions.length : 0;\n        }) || [],\n        backgroundColor: [\n          'rgba(34, 197, 94, 0.8)',\n          'rgba(59, 130, 246, 0.8)',\n          'rgba(245, 158, 11, 0.8)',\n          'rgba(239, 68, 68, 0.8)',\n          'rgba(147, 51, 234, 0.8)',\n          'rgba(236, 72, 153, 0.8)',\n        ],\n        borderColor: [\n          'rgba(34, 197, 94, 1)',\n          'rgba(59, 130, 246, 1)',\n          'rgba(245, 158, 11, 1)',\n          'rgba(239, 68, 68, 1)',\n          'rgba(147, 51, 234, 1)',\n          'rgba(236, 72, 153, 1)',\n        ],\n        borderWidth: 2,\n      },\n    ],\n  };\n\n  const riskDistributionData = {\n    labels: ['Low Risk (Green)', 'Medium Risk (Yellow)', 'High Risk (Red)'],\n    datasets: [\n      {\n        data: [\n          statsData?.riskDistribution?.Green || 0,\n          statsData?.riskDistribution?.Yellow || 0,\n          statsData?.riskDistribution?.Red || 0,\n        ],\n        backgroundColor: [\n          'rgba(34, 197, 94, 0.8)',\n          'rgba(245, 158, 11, 0.8)',\n          'rgba(239, 68, 68, 0.8)',\n        ],\n        borderColor: [\n          'rgba(34, 197, 94, 1)',\n          'rgba(245, 158, 11, 1)',\n          'rgba(239, 68, 68, 1)',\n        ],\n        borderWidth: 2,\n      },\n    ],\n  };\n\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: {\n          font: {\n            size: 12\n          }\n        }\n      },\n      title: {\n        display: false,\n      },\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        grid: {\n          color: 'rgba(0,0,0,0.1)',\n        },\n        ticks: {\n          font: {\n            size: 11\n          }\n        }\n      },\n      x: {\n        grid: {\n          color: 'rgba(0,0,0,0.1)',\n        },\n        ticks: {\n          font: {\n            size: 11\n          }\n        }\n      }\n    }\n  };\n\n  const doughnutOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom',\n        labels: {\n          font: {\n            size: 12\n          },\n          padding: 20\n        }\n      },\n    },\n  };\n\n  const exportData = () => {\n    try {\n      const dataToExport = {\n        user: user.username,\n        exportDate: new Date().toISOString(),\n        filters: {\n          crop: selectedCrop,\n          timeRange: selectedTimeRange\n        },\n        statistics: statsData,\n        predictions: getFilteredData()\n      };\n      \n      const blob = new Blob([JSON.stringify(dataToExport, null, 2)], {\n        type: 'application/json'\n      });\n      \n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `crop-reports-${user.username}-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      \n      toast.success('Report exported successfully');\n    } catch (error) {\n      toast.error('Failed to export report');\n    }\n  };\n\n  const getRiskIcon = (riskLevel) => {\n    switch (riskLevel) {\n      case 'Green':\n        return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\n      case 'Yellow':\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />;\n      case 'Red':\n        return <AlertTriangle className=\"h-4 w-4 text-red-600\" />;\n      default:\n        return <Activity className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center pt-16\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 pt-16\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 flex items-center\">\n            <BarChart3 className=\"h-8 w-8 mr-3 text-green-600\" />\n            {t('reports')}\n          </h1>\n          <p className=\"text-gray-600 mt-2\">\n            Analyze your crop yield trends and historical predictions\n          </p>\n        </div>\n\n        {/* Yield Trend Chart */}\n        {reportsData?.trends?.yield_trend?.length > 0 && (\n          <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-xl font-semibold text-gray-800 flex items-center\">\n                <TrendingUp className=\"h-6 w-6 mr-2 text-blue-500\" />\n                Yield Trends\n              </h2>\n              <button className=\"flex items-center space-x-1 text-blue-600 hover:text-blue-700\">\n                <Download className=\"h-4 w-4\" />\n                <span>Export</span>\n              </button>\n            </div>\n            <div className=\"h-64\">\n              <Line data={chartData} options={chartOptions} />\n            </div>\n          </div>\n        )}\n\n        {/* Historical Predictions */}\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-6 flex items-center\">\n            <Calendar className=\"h-6 w-6 mr-2 text-green-500\" />\n            Historical Predictions\n          </h2>\n\n          {reportsData?.predictions?.length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Date\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Crop Type\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Predicted Yield\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Risk Level\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Recommendations\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {reportsData.predictions.map((prediction) => (\n                    <tr key={prediction.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        {new Date(prediction.created_at).toLocaleDateString()}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        {prediction.crop_type}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600\">\n                        {prediction.predicted_yield} t/ha\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                          prediction.risk_level === 'Green' ? 'bg-green-100 text-green-800' :\n                          prediction.risk_level === 'Yellow' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-red-100 text-red-800'\n                        }`}>\n                          {t(prediction.risk_level === 'Green' ? 'safe' :\n                             prediction.risk_level === 'Yellow' ? 'warning' : 'risk')}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 text-sm text-gray-900\">\n                        {prediction.recommendations.length} recommendations\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <p className=\"text-gray-500\">No historical data available yet.</p>\n              <button\n                onClick={() => window.location.href = '/data-entry'}\n                className=\"mt-4 bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 transition-colors\"\n              >\n                Start Making Predictions\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Reports;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}